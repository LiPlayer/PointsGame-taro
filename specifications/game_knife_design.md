# 神厨飞刀 (Chef's Flying Knife) 1:1 完美还原设计规范 (V1.3)

**目标**: 1:1 像素级还原 Ketchapp 名作 "Knife Hit"，适配“神厨”主题。

---

## 1. 无尽变幻机制 (Endless & Procedural Mechanics)

### 1.1 程序化旋转脚本 (Procedural Rotation)
旋转不再是预设的，而是由 **原子行为 (Atomic Behaviors)** 随机组合而成：
-   **行为池 (Behavior Pool)**:
    -   `Constant`: 持续匀速（低中高三档速度）。
    -   `Oscillate`: 像钟摆一样左右往复旋转。
    -   `Jerk`: 突然的极短加速或骤停。
    -   `SmoothLerp`: 平滑地从一个速度过渡到另一个速度（甚至反向）。
-   **生成逻辑**: 系统每隔 $T$ 秒（或命满 $N$ 把刀后）从池中随机抽取并平滑混合下一个行为，确保不可预测性。

### 1.2 动态难度指数 (Dynamic Difficulty)
-   **难度随分值 (Score) 增长**:
    -   **旋转复杂度**: 分数越高，`Jerk` 和 `Reverse` 的频率越高。
    -   **留白区域**: 初始圆盘上预留刀具/铁钉的数量随难度增加。
    -   **投掷冷却**: 飞刀发射后的冷却时间微小缩短，鼓励更快节奏的连击。

### 1.3 核心玩法与奖励
-   **无缝衔接**: 当圆盘上的飞刀达到上限（如 8-12 把）时，圆盘瞬间“炸裂”并由下一形态（如改变材质、大小或纹理）无缝替换，游戏不中断，分数持续累加。
-   **连击加成 (Flow Bonus)**: 连续快速命中（时间间隔 $< 0.5s$）可触发热度视觉反馈，并获得双倍积分。

---

## 2. 视觉与氛围 (Visuals & Atmosphere)

### 2.1 动态色彩系统 (Dynamic Hue)
-   **色相漂移**: 背景和圆盘的主色相随连击数和总分缓慢偏移（参考 `Stack` 的 HSL 偏移逻辑）。
-   **光影律动**: 随着旋转规律的变化，主光源的强度和颜色也会产生微弱的呼吸感律动。

### 2.2 物理反馈
-   **爆炸式切换**: 圆盘被插满时的“炸裂”是纯物理驱动的。碎片飞散后，新的圆盘从屏幕中心缩放出现（Pop-in），伴随强烈的视觉冲击。
-   **碎屑系统**: 每一刀命中的瞬间，迸发出的粒子颜色随当前材质动态调整（木屑、金属火花、汁液等）。

---

## 3. UI 与交互 (HUD & Interaction)

-   **沉浸式 HUD**: 移除关卡数 (STAGE)。仅显示：
    -   **中心**: 浮动的当前关卡分（命满一轮重置）。
    -   **顶部**: 全局最高分。
    -   **底部**: 本轮剩余飞刀数量（动态刷新）。
-   **操作**: 极简 Tap，支持长按或快速连点。

---

## 4. 技术实施要点 (Technical Keypoints)
-   **脚本引擎**: 实现一个简单的 `Timeline` 管理器，支持 `Sequence` 和 `RandomSelector`。
-   **资源池**: 预加载多种圆盘模型（圆柱、齿轮、切面水果等）和刀具皮肤，实现瞬间切换。
-   **物理引擎**: `cannon-es` 负责碎片的抛射轨迹。
