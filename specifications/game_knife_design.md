# 神厨飞刀 (Chef's Flying Knife) 1:1 完美还原设计规范 (V1.3)

**目标**: 1:1 像素级还原 Ketchapp 名作 "Knife Hit"，适配“神厨”主题。

---

## 1. 无尽变幻机制 (Endless & Procedural Mechanics)

### 1.1 程序化旋转脚本 (Procedural Rotation)
旋转不再是预设的，而是由 **原子行为 (Atomic Behaviors)** 随机组合而成：
-   **行为池 (Behavior Pool)**:
    -   `Constant`: 持续匀速（低中高三档速度）。
    -   `Oscillate`: 像钟摆一样左右往复旋转。
    -   `Jerk`: 突然的极短加速或骤停。
    -   `SmoothLerp`: 平滑地从一个速度过渡到另一个速度（甚至反向）。
-   **生成逻辑**: 系统每隔 $T$ 秒（或命满 $N$ 把刀后）从池中随机抽取并平滑混合下一个行为，确保不可预测性。

### 1.2 动态难度指数 (Dynamic Difficulty)
-   **难度随分值 (Score) 增长**:
    -   **旋转复杂度**: 分数越高，`Jerk` 和 `Reverse` 的频率越高。
    -   **留白区域**: 初始圆盘上预留刀具/铁钉的数量随难度增加。
    -   **投掷冷却**: 飞刀发射后的冷却时间微小缩短，鼓励更快节奏的连击。

### 1.3 核心玩法与奖励
-   **无缝衔接**: 当圆盘上的飞刀达到上限（如 8-12 把）时，圆盘瞬间“炸裂”并由下一形态（如改变材质、大小或纹理）无缝替换，游戏不中断，分数持续累加。
-   **连击加成 (Flow Bonus)**: 连续快速命中（时间间隔 $< 0.5s$）可触发热度视觉反馈，并获得双倍积分。

## 2. 随机性与乐趣核心 (Randomness & Fun Hook)

### 2.1 随机性的深度：从“观察”到“反应”
不同于 $Stack$ 的匀速平稳，本游戏的随机性旨在创造一种**“心流中断与重构”**的体验：
-   **变速预测失败**：玩家在第 1-3 刀可能适应了快节奏，但第 4 刀圆盘可能突然停顿 0.5 秒。这种“期待落空”带来的错愕感和随后的“补救反应”是乐趣来源。
-   **环境多样性**：每一轮炸裂后，随机刷出的目标物体（砧板、南瓜、大龙虾、甚至一个飞转的盘子）其旋转惯性和视觉体积各不相同，玩家必须实时调整手感。

### 1.2 飞刀 (Knife) 动力学
-   **发射**: Tap 瞬间给定垂直向上的固定初速度。此时飞刀不受重力（Gravity: 0），沿直线路径飞行。
-   **命中判定 (Hit)**:
    -   使用每帧射线检测 (Raycast) 刀尖位置。
    -   **成功命中**: 刀具瞬间停止运动，挂载 (Set Parent) 到圆盘上，随圆盘同步旋转。刀尖深度固定插入。
    -   **物理后效**: 命中瞬间，圆盘整体产生一个 Y 轴方向 2px 的位移补偿（Recoil），并在 0.1s 内平滑复位，增强打击感。
-   **失败判定 (Fail)**:
    -   若刀具碰撞体 (Box Collider) 与圆盘上已存在的刀具相交。
    -   **失败效果**: 飞刀物理模拟开启（Gravity: 9.8），同时由于撞击产生一个随机的水平冲量和角速度，使其在空中翻转坠落。场景背景色瞬间加深。

### 2.2 核心乐趣 (The Hook)
-   **极致的破坏快感**：$Stack$ 的乐趣是构建（Building），而本游戏的乐趣是**“精准的破坏” (Precision Destruction)**。最后一刀命中时，圆盘在 3D 物理模拟下向四周炸裂的视觉效果是极强的多巴胺正反馈。
-   **高压下的节奏感**：当圆盘转速极快且只剩极小缝隙时，在瞬息万变的节奏中准确切入，这种**“见缝插针”的博弈感**比堆叠更具刺激性。
-   **完美连击的音效反馈**：每一刀插在木头、金属或各种食材上的声音质感各异，连续命中的快感类似敲击乐器，极具解压。

---

## 3. 视觉规范 (Visual Specifications - Minimalist Flat Style)

本项目追求**极简扁平矢量风 (Minimalist Flat Vector)**，追求参考图中的干净质感。

### 3.1 美术风格核心
-   **去高光/去阴影**: 使用 `MeshBasicMaterial`。不使用复杂的实时光影，确保场景在不同设备上的渲染一致性。
-   **线条艺术**: 圆盘模型使用深色描边或内嵌线条（而非贴图）表现木质层理，维持矢量感。
-   **色彩方案 (Warm Earth Tones)**:
    -   **背景**: 温暖的土黄/浅啡色 (`#D2A679` 或类似色相)。
    -   **圆盘 (砧板)**: 经典的木纹色，带有深色的环形纹理线。
    -   **飞刀**: 灰色刀刃（#B0B0B0），黑色/深灰色刀柄。

### 3.2 动态视觉细节
-   **纯净设计**: 场景中只有圆盘、飞刀和极简 UI。
-   **物理爆炸**: 圆盘“炸裂”时产生的碎片应为不规则的多边形色块，受爆炸中心向外的离心力，无旋转地飞散或带极小随机旋转，保持其极简属性。
-   **UI 布局**:
    -   **顶部中央**: `BEST: 88` (Sans-serif, 开源字体 Plus Jakarta Sans)。
    -   **圆盘上方**: 巨大的半透明/白色数字（当前分数）。
    -   **底部**: 一排精美的红色刀具图标，代表剩余飞刀。

### 3.3 程序化主题库 (Procedural Theme Pool)
视觉系统会随每一轮（即圆盘炸裂后）随机切换主题，保持 **Classic 1:1** 布局（完整圆形圆盘）：

| 主题名称 | 目标物体 (Log) | 形状 | 投掷物 (Knife) | 核心色调 |
| :--- | :--- | :--- | :--- | :--- |
| **经典神厨** | 木质圆盘 | 完整圆形 | 厨刀 | 暖黄/咖啡 (`#D2A679`) |
| **生鲜超市** | 南瓜/西瓜 | 完整圆形 | 细长餐刀 | 浅橘/深绿 (`#F4B173`) |
| **五金工坊** | 金属齿轮 | 完整圆形 | 钢钉/起子 | 冷灰/深蓝 (`#7D9BBD`) |
| **日料大师** | 三文鱼卷 | 完整圆形 | 柳刃包丁 | 浅粉/白色 (`#FFC0CB`) |

### 3.4 动态视觉细节 (UI & HUD)
-   **主分显示**: 屏幕中央半透明白色字体，1:1 还原经典布局。
-   **最高分**: `BEST: 88` 位于顶部正中。
-   **剩余飞刀**: 底部红色图标，代表本轮剩余数量。
-   **注意**: 不添加“目标形状变化”和额外的“UI 细节特效”，严格遵循 1:1 极简风格。

### 3.4 动态氛围演进
-   **无缝切色**: 背景与地板的色相 (Hue) 不仅随机，还会在游玩过程中产生 $10^\circ - 30^\circ$ 的平滑漂移，营造“时空流转”的错觉。
-   **光效同步**: 当转入“五金”主题时，材质感会从扁平木质切换为带有微弱金属反射的色块感。

---

## 4. 技术实施要点 (Technical Keypoints)
-   **资产池 (Asset Multi-skin)**: 使用单一 `Mesh` 挂载点，根据主题 ID 动态替换 `Geometry`（模型）和 `Material`（色块材质）。
-   **脚本引擎**: 实现一个简单的 `Timeline` 管理器，支持 `Sequence` 和 `RandomSelector`。
-   **物理引擎**: `cannon-es` 负责碎片的抛射轨迹。
